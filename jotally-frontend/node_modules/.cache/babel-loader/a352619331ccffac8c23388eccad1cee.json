{"ast":null,"code":"var _jsxFileName = \"/Users/peterdpong/Projects/jotally/jotally-frontend/src/App.js\";\nimport React, { useState, useEffect, useRef } from 'react';\nimport noteService from './services/notes';\nimport LoginForm from './components/LoginForm';\nimport NoteForm from './components/NoteForm';\nimport RegisterForm from './components/RegisterForm';\nimport Toggable from './components/Toggable';\nimport NotesList from './components/NotesList';\nimport { BrowserRouter as Router, Switch, Route, Link } from 'react-router-dom';\n\nconst Notification = ({\n  message\n}) => {\n  if (message == null) {\n    return null;\n  }\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"error\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 18,\n      columnNumber: 5\n    }\n  }, message);\n};\n\nconst App = () => {\n  const [notes, setNotes] = useState([]);\n  const [newNote, setNewNote] = useState('a new note');\n  const [showAll, setShowAll] = useState(true);\n  const [errorMessage, setErrorMessage] = useState();\n  const [username, setUsername] = useState('');\n  const [password, setPassword] = useState('');\n  const [user, setUser] = useState(null);\n  const [loginVisible, setLoginVisible] = useState(false);\n  const noteFormRef = useRef();\n  useEffect(() => {\n    const loggedUserJSON = window.localStorage.getItem('loggedNoteappUser');\n\n    if (loggedUserJSON) {\n      const user = JSON.parse(loggedUserJSON);\n      setUser(user);\n      noteService.setToken(user.token);\n    }\n  }, []);\n  useEffect(() => {\n    if (user) {\n      noteService.getAll().then(initialNotes => {\n        setNotes(initialNotes);\n      });\n    }\n  }, []);\n\n  const addNote = noteObject => {\n    noteService.createNote(noteObject).then(returnedNote => {\n      setNotes(notes.concat(returnedNote));\n      setNewNote(\"\");\n    });\n  };\n\n  const notesToShow = showAll ? notes : notes.filter(note => note.important);\n\n  const toggleImportance = id => {\n    const note = notes.find(n => n.id === id);\n    const changedNote = { ...note,\n      important: !note.important\n    };\n    noteService.updateNote(id, changedNote).then(returnedNote => {\n      setNotes(notes.map(note => note.id !== id ? note : returnedNote));\n    }).catch(error => {\n      setErrorMessage(`Note '${note.content}' was already removed from the server`);\n      setTimeout(() => {\n        setErrorMessage(null);\n      }, 5000);\n      setNotes(notes.filter(n => n.id !== id));\n    });\n  };\n\n  return /*#__PURE__*/React.createElement(Router, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"app\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Notification, {\n    message: errorMessage,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(Link, {\n    to: \"/\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"navbar\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    className: \"logo\",\n    src: \"./res/pencil-svg.svg\",\n    alt: \"Logo\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 15\n    }\n  }), /*#__PURE__*/React.createElement(\"h1\", {\n    className: \"title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 15\n    }\n  }, \"Jotally\"))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"optionsbar\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    className: \"button\",\n    onClick: () => setShowAll(!showAll),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 11\n    }\n  }, \"Show \", showAll ? 'Important' : 'All'), user ? /*#__PURE__*/React.createElement(\"div\", {\n    className: \"flex-right\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    className: \"text\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 47\n    }\n  }, user.name, \" currently logged in.\"), \" \", /*#__PURE__*/React.createElement(\"button\", {\n    className: \"button\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 104\n    }\n  }, \"Log out\")) : /*#__PURE__*/React.createElement(\"div\", {\n    className: \"flex-right\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Link, {\n    to: \"/login\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    className: \"button\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 17\n    }\n  }, \"Login\")), /*#__PURE__*/React.createElement(Link, {\n    to: \"/register\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    className: \"button\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 17\n    }\n  }, \"Register\")))), /*#__PURE__*/React.createElement(Switch, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Route, {\n    path: \"/login\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(LoginForm, {\n    username: username,\n    password: password,\n    setUsername: setUsername,\n    setPassword: setPassword,\n    setUser: setUser,\n    setErrorMessage: setErrorMessage,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 13\n    }\n  })), /*#__PURE__*/React.createElement(Route, {\n    path: \"/register\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(RegisterForm, {\n    setErrorMessage: setErrorMessage,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 13\n    }\n  })), /*#__PURE__*/React.createElement(Route, {\n    path: \"/\",\n    render: () => user ? /*#__PURE__*/React.createElement(NotesList, {\n      notesToShow: notesToShow,\n      toggleImportance: toggleImportance,\n      setNotes: setNotes,\n      createNote: addNote,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131,\n        columnNumber: 20\n      }\n    }) : /*#__PURE__*/React.createElement(\"h3\", {\n      className: \"subtitle\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 132,\n        columnNumber: 15\n      }\n    }, \"You aren't currently logged in. Log in to see your saved notes.\"),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 11\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"footer\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    className: \"title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 11\n    }\n  }, \"Created by \", /*#__PURE__*/React.createElement(\"a\", {\n    className: \"links\",\n    href: \"https://peterdpong.github.io/\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 43\n    }\n  }, \"Peter D'Pong\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"flex-right\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    className: \"title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"a\", {\n    className: \"links\",\n    href: \"https://github.com/peterdpong/jotally\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 34\n    }\n  }, \"Source\"))))));\n};\n\nexport default App;","map":{"version":3,"sources":["/Users/peterdpong/Projects/jotally/jotally-frontend/src/App.js"],"names":["React","useState","useEffect","useRef","noteService","LoginForm","NoteForm","RegisterForm","Toggable","NotesList","BrowserRouter","Router","Switch","Route","Link","Notification","message","App","notes","setNotes","newNote","setNewNote","showAll","setShowAll","errorMessage","setErrorMessage","username","setUsername","password","setPassword","user","setUser","loginVisible","setLoginVisible","noteFormRef","loggedUserJSON","window","localStorage","getItem","JSON","parse","setToken","token","getAll","then","initialNotes","addNote","noteObject","createNote","returnedNote","concat","notesToShow","filter","note","important","toggleImportance","id","find","n","changedNote","updateNote","map","catch","error","content","setTimeout","name"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useRef } from 'react'\nimport noteService from './services/notes'\nimport LoginForm from './components/LoginForm'\nimport NoteForm from './components/NoteForm'\nimport RegisterForm from './components/RegisterForm'\nimport Toggable from './components/Toggable'\n\nimport NotesList from './components/NotesList'\n\nimport { BrowserRouter as Router, Switch, Route, Link} from 'react-router-dom'\n\nconst Notification = ( {message} ) => {\n  if(message == null){\n    return null\n  }\n\n  return(\n    <div className=\"error\">\n      {message}\n    </div>\n  )\n}\n\nconst App = () => {\n  const [notes, setNotes] = useState([])\n  const [newNote, setNewNote] = useState('a new note')\n  const [showAll, setShowAll] = useState(true)\n  const [errorMessage, setErrorMessage] = useState()\n  const [username, setUsername] = useState('')\n  const [password, setPassword] = useState('')\n  const [user, setUser] = useState(null)\n  const [loginVisible, setLoginVisible] = useState(false)\n  const noteFormRef = useRef()\n\n  useEffect(() => {\n    const loggedUserJSON = window.localStorage.getItem('loggedNoteappUser')\n    if (loggedUserJSON) {\n      const user = JSON.parse(loggedUserJSON)\n      setUser(user)\n      noteService.setToken(user.token)\n    }\n  }, [])\n\n  useEffect(() => {\n    if(user){\n      noteService.getAll().then(initialNotes => {\n        setNotes(initialNotes)\n      })\n    }\n  }, [])\n\n  const addNote = (noteObject) => {\n    noteService.createNote(noteObject).then(returnedNote => {\n      setNotes(notes.concat(returnedNote))\n      setNewNote(\"\")})\n  }\n\n  const notesToShow = showAll ? notes : notes.filter(note => note.important)\n\n  const toggleImportance = (id) => {\n    const note = notes.find(n => n.id === id)\n    const changedNote = {...note, important: !note.important}\n\n    noteService.updateNote(id, changedNote).then(returnedNote => {\n      setNotes(notes.map(note => note.id !== id ? note : returnedNote))\n    })\n    .catch(error => {\n      setErrorMessage(\n        `Note '${note.content}' was already removed from the server`\n      )\n      setTimeout(() => {\n        setErrorMessage(null)\n      }, 5000)\n      setNotes(notes.filter(n => n.id !== id))\n    })\n  }\n\n  return (\n    <Router>\n      <div className=\"app\">\n        <Notification message={errorMessage}/>\n\n        <Link to=\"/\">\n          <div className=\"navbar\">\n              <img className=\"logo\" src=\"./res/pencil-svg.svg\" alt=\"Logo\"/>\n              <h1 className=\"title\">Jotally</h1>\n          </div>\n        </Link>\n        \n\n        <div className=\"optionsbar\">\n          <button className=\"button\" onClick={() => setShowAll(!showAll)}>\n            Show {showAll ? 'Important' : 'All'}\n          </button>\n\n\n          {user ? <div className=\"flex-right\"><p className=\"text\">{user.name} currently logged in.</p> <button className=\"button\">Log out</button></div> : \n            <div className=\"flex-right\">\n              <Link to=\"/login\">\n                <button className=\"button\">Login</button>\n              </Link>\n              <Link to=\"/register\">\n                <button className=\"button\">Register</button>\n              </Link>\n            </div>\n          \n          }\n          \n        </div>\n        \n\n        <Switch>\n          <Route path=\"/login\">\n            <LoginForm\n            username={username}\n            password={password}\n            setUsername={setUsername}\n            setPassword={setPassword}\n            setUser={setUser}\n            setErrorMessage={setErrorMessage}\n            />\n          </Route>\n\n          <Route path=\"/register\">\n            <RegisterForm\n            setErrorMessage={setErrorMessage}\n            />\n          </Route>\n\n          <Route path=\"/\" render={() => \n            user ? <NotesList notesToShow={notesToShow} toggleImportance={toggleImportance} setNotes={setNotes} createNote={addNote}/> \n            : <h3 className=\"subtitle\">You aren't currently logged in. Log in to see your saved notes.</h3>}>\n            \n          </Route>\n        </Switch>\n\n        \n        <div className=\"footer\">\n          <p className=\"title\">Created by <a className=\"links\" href=\"https://peterdpong.github.io/\">Peter D'Pong</a></p>\n          \n          <div className=\"flex-right\">\n            <p className=\"title\"><a className=\"links\" href=\"https://github.com/peterdpong/jotally\">Source</a></p>\n          </div>\n        </div>\n      </div>\n    </Router>\n  )\n}\n\nexport default App"]},"metadata":{},"sourceType":"module"}