{"ast":null,"code":"import _objectSpread from\"/Users/peterdpong/Projects/jotally/jotally-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/Users/peterdpong/Projects/jotally/jotally-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect,useRef}from'react';import noteService from'./services/notes';import LoginForm from'./components/LoginForm';import NoteForm from'./components/NoteForm';import RegisterForm from'./components/RegisterForm';import Toggable from'./components/Toggable';import NotesList from'./components/NotesList';import{BrowserRouter as Router,Switch,Route,Link}from'react-router-dom';var Notification=function Notification(_ref){var message=_ref.message;if(message==null){return null;}return/*#__PURE__*/React.createElement(\"div\",{className:\"error\"},message);};var App=function App(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),notes=_useState2[0],setNotes=_useState2[1];var _useState3=useState('a new note'),_useState4=_slicedToArray(_useState3,2),newNote=_useState4[0],setNewNote=_useState4[1];var _useState5=useState(true),_useState6=_slicedToArray(_useState5,2),showAll=_useState6[0],setShowAll=_useState6[1];var _useState7=useState(),_useState8=_slicedToArray(_useState7,2),errorMessage=_useState8[0],setErrorMessage=_useState8[1];var _useState9=useState(''),_useState10=_slicedToArray(_useState9,2),username=_useState10[0],setUsername=_useState10[1];var _useState11=useState(''),_useState12=_slicedToArray(_useState11,2),password=_useState12[0],setPassword=_useState12[1];var _useState13=useState(null),_useState14=_slicedToArray(_useState13,2),user=_useState14[0],setUser=_useState14[1];var _useState15=useState(false),_useState16=_slicedToArray(_useState15,2),loginVisible=_useState16[0],setLoginVisible=_useState16[1];var noteFormRef=useRef();useEffect(function(){var loggedUserJSON=window.localStorage.getItem('loggedNoteappUser');if(loggedUserJSON){var _user=JSON.parse(loggedUserJSON);setUser(_user);noteService.setToken(_user.token);}},[]);useEffect(function(){if(user){noteService.getAll().then(function(initialNotes){setNotes(initialNotes);});}},[]);var addNote=function addNote(noteObject){noteService.createNote(noteObject).then(function(returnedNote){setNotes(notes.concat(returnedNote));setNewNote(\"\");});};var notesToShow=showAll?notes:notes.filter(function(note){return note.important;});var toggleImportance=function toggleImportance(id){var note=notes.find(function(n){return n.id===id;});var changedNote=_objectSpread(_objectSpread({},note),{},{important:!note.important});noteService.updateNote(id,changedNote).then(function(returnedNote){setNotes(notes.map(function(note){return note.id!==id?note:returnedNote;}));}).catch(function(error){setErrorMessage(\"Note '\".concat(note.content,\"' was already removed from the server\"));setTimeout(function(){setErrorMessage(null);},5000);setNotes(notes.filter(function(n){return n.id!==id;}));});};return/*#__PURE__*/React.createElement(Router,null,/*#__PURE__*/React.createElement(\"div\",{className:\"app\"},/*#__PURE__*/React.createElement(Notification,{message:errorMessage}),/*#__PURE__*/React.createElement(Link,{to:\"/\"},/*#__PURE__*/React.createElement(\"div\",{className:\"navbar\"},/*#__PURE__*/React.createElement(\"img\",{className:\"logo\",src:\"./res/pencil-svg.svg\",alt:\"Logo\"}),/*#__PURE__*/React.createElement(\"h1\",{className:\"title\"},\"Jotally\"))),/*#__PURE__*/React.createElement(\"div\",{className:\"optionsbar\"},/*#__PURE__*/React.createElement(\"button\",{className:\"button\",onClick:function onClick(){return setShowAll(!showAll);}},\"Show \",showAll?'Important':'All'),/*#__PURE__*/React.createElement(\"div\",{className:\"flex-right\"},/*#__PURE__*/React.createElement(Link,{to:\"/login\"},/*#__PURE__*/React.createElement(\"button\",{className:\"button\"},\"Login\")),/*#__PURE__*/React.createElement(Link,{to:\"/register\"},/*#__PURE__*/React.createElement(\"button\",{className:\"button\"},\"Register\")))),/*#__PURE__*/React.createElement(Switch,null,/*#__PURE__*/React.createElement(Route,{path:\"/login\"},/*#__PURE__*/React.createElement(LoginForm,{username:username,password:password,setUsername:setUsername,setPassword:setPassword,setUser:setUser,setErrorMessage:setErrorMessage})),/*#__PURE__*/React.createElement(Route,{path:\"/register\"},/*#__PURE__*/React.createElement(RegisterForm,{setErrorMessage:setErrorMessage})),/*#__PURE__*/React.createElement(Route,{path:\"/\",render:function render(){return user?/*#__PURE__*/React.createElement(NotesList,{notesToShow:notesToShow,toggleImportance:toggleImportance,setNotes:setNotes,createNote:addNote}):/*#__PURE__*/React.createElement(\"h3\",{className:\"subtitle\"},\"You aren't currently logged in. Log in to see your saved notes.\");}})),/*#__PURE__*/React.createElement(\"div\",{className:\"footer\"},/*#__PURE__*/React.createElement(\"p\",{className:\"title\"},\"Created by \",/*#__PURE__*/React.createElement(\"a\",{className:\"links\",href:\"https://peterdpong.github.io/\"},\"Peter D'Pong\")),/*#__PURE__*/React.createElement(\"div\",{className:\"flex-right\"},/*#__PURE__*/React.createElement(\"p\",{className:\"title\"},/*#__PURE__*/React.createElement(\"a\",{className:\"links\",href:\"https://github.com/peterdpong/jotally\"},\"Source\"))))));};export default App;","map":{"version":3,"sources":["/Users/peterdpong/Projects/jotally/jotally-frontend/src/App.js"],"names":["React","useState","useEffect","useRef","noteService","LoginForm","NoteForm","RegisterForm","Toggable","NotesList","BrowserRouter","Router","Switch","Route","Link","Notification","message","App","notes","setNotes","newNote","setNewNote","showAll","setShowAll","errorMessage","setErrorMessage","username","setUsername","password","setPassword","user","setUser","loginVisible","setLoginVisible","noteFormRef","loggedUserJSON","window","localStorage","getItem","JSON","parse","setToken","token","getAll","then","initialNotes","addNote","noteObject","createNote","returnedNote","concat","notesToShow","filter","note","important","toggleImportance","id","find","n","changedNote","updateNote","map","catch","error","content","setTimeout"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useRef } from 'react'\nimport noteService from './services/notes'\nimport LoginForm from './components/LoginForm'\nimport NoteForm from './components/NoteForm'\nimport RegisterForm from './components/RegisterForm'\nimport Toggable from './components/Toggable'\n\nimport NotesList from './components/NotesList'\n\nimport { BrowserRouter as Router, Switch, Route, Link} from 'react-router-dom'\n\nconst Notification = ( {message} ) => {\n  if(message == null){\n    return null\n  }\n\n  return(\n    <div className=\"error\">\n      {message}\n    </div>\n  )\n}\n\nconst App = () => {\n  const [notes, setNotes] = useState([])\n  const [newNote, setNewNote] = useState('a new note')\n  const [showAll, setShowAll] = useState(true)\n  const [errorMessage, setErrorMessage] = useState()\n  const [username, setUsername] = useState('')\n  const [password, setPassword] = useState('')\n  const [user, setUser] = useState(null)\n  const [loginVisible, setLoginVisible] = useState(false)\n  const noteFormRef = useRef()\n\n  useEffect(() => {\n    const loggedUserJSON = window.localStorage.getItem('loggedNoteappUser')\n    if (loggedUserJSON) {\n      const user = JSON.parse(loggedUserJSON)\n      setUser(user)\n      noteService.setToken(user.token)\n    }\n  }, [])\n\n  useEffect(() => {\n    if(user){\n      noteService.getAll().then(initialNotes => {\n        setNotes(initialNotes)\n      })\n    }\n  }, [])\n\n  const addNote = (noteObject) => {\n    noteService.createNote(noteObject).then(returnedNote => {\n      setNotes(notes.concat(returnedNote))\n      setNewNote(\"\")})\n  }\n\n  const notesToShow = showAll ? notes : notes.filter(note => note.important)\n\n  const toggleImportance = (id) => {\n    const note = notes.find(n => n.id === id)\n    const changedNote = {...note, important: !note.important}\n\n    noteService.updateNote(id, changedNote).then(returnedNote => {\n      setNotes(notes.map(note => note.id !== id ? note : returnedNote))\n    })\n    .catch(error => {\n      setErrorMessage(\n        `Note '${note.content}' was already removed from the server`\n      )\n      setTimeout(() => {\n        setErrorMessage(null)\n      }, 5000)\n      setNotes(notes.filter(n => n.id !== id))\n    })\n  }\n\n  return (\n    <Router>\n      <div className=\"app\">\n        <Notification message={errorMessage}/>\n\n        <Link to=\"/\">\n          <div className=\"navbar\">\n              <img className=\"logo\" src=\"./res/pencil-svg.svg\" alt=\"Logo\"/>\n              <h1 className=\"title\">Jotally</h1>\n          </div>\n        </Link>\n        \n\n        <div className=\"optionsbar\">\n          <button className=\"button\" onClick={() => setShowAll(!showAll)}>\n            Show {showAll ? 'Important' : 'All'}\n          </button>\n          <div className=\"flex-right\">\n            <Link to=\"/login\">\n              <button className=\"button\">Login</button>\n            </Link>\n            <Link to=\"/register\">\n              <button className=\"button\">Register</button>\n            </Link>\n          </div>\n        </div>\n        \n\n        <Switch>\n          <Route path=\"/login\">\n            <LoginForm\n            username={username}\n            password={password}\n            setUsername={setUsername}\n            setPassword={setPassword}\n            setUser={setUser}\n            setErrorMessage={setErrorMessage}\n            />\n          </Route>\n\n          <Route path=\"/register\">\n            <RegisterForm\n            setErrorMessage={setErrorMessage}\n            />\n          </Route>\n\n          <Route path=\"/\" render={() => \n            user ? <NotesList notesToShow={notesToShow} toggleImportance={toggleImportance} setNotes={setNotes} createNote={addNote}/> \n            : <h3 className=\"subtitle\">You aren't currently logged in. Log in to see your saved notes.</h3>}>\n            \n          </Route>\n        </Switch>\n\n        \n        <div className=\"footer\">\n          <p className=\"title\">Created by <a className=\"links\" href=\"https://peterdpong.github.io/\">Peter D'Pong</a></p>\n          \n          <div className=\"flex-right\">\n            <p className=\"title\"><a className=\"links\" href=\"https://github.com/peterdpong/jotally\">Source</a></p>\n          </div>\n        </div>\n      </div>\n    </Router>\n  )\n}\n\nexport default App"]},"metadata":{},"sourceType":"module"}