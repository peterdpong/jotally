(this.webpackJsonppart1=this.webpackJsonppart1||[]).push([[0],{30:function(e,t,a){e.exports=a(59)},58:function(e,t,a){},59:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(28),o=a.n(c),s=a(17),l=a(4),u=a(3),i=a.n(u),m=a(9),p=a(10),f=a.n(p),b=null,d={getAll:function(){var e=Object(m.a)(i.a.mark((function e(){var t,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={headers:{Authorization:b}},e.next=3,f.a.get("/api/notes",t);case 3:return a=e.sent,console.log(a.data),e.abrupt("return",a.data);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),createNote:function(){var e=Object(m.a)(i.a.mark((function e(t){var a,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={headers:{Authorization:b}},e.next=3,f.a.post("/api/notes",t,a);case 3:return n=e.sent,e.abrupt("return",n.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),updateNote:function(e,t){return f.a.put("".concat("/api/notes","/").concat(e),t).then((function(e){return e.data}))},setToken:function(e){b="bearer ".concat(e)}},v=a(1),g={login:function(){var e=Object(m.a)(i.a.mark((function e(t){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.a.post("/api/login",t);case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},E=function(e){var t=e.username,a=e.password,n=e.setUser,c=e.setUsername,o=e.setPassword,s=e.setErrorMessage,l=Object(v.f)(),u=function(){var e=Object(m.a)(i.a.mark((function e(r){var u;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.preventDefault(),e.prev=1,e.next=4,g.login({username:t,password:a});case 4:u=e.sent,window.localStorage.setItem("loggedNoteappUser",JSON.stringify(u)),d.setToken(u.token),n(u),c(""),o(""),l.push("/"),e.next=18;break;case 13:e.prev=13,e.t0=e.catch(1),console.log(e.t0),s("Wrong username or password."),setTimeout((function(){s(null)}),2500);case 18:case"end":return e.stop()}}),e,null,[[1,13]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",null,r.a.createElement("h2",{className:"title"},"Login"),r.a.createElement("form",{onSubmit:u},r.a.createElement("div",null,r.a.createElement("label",{className:"subtitle",for:"username"},"Username"),r.a.createElement("input",{className:"formTextbox",id:"username",value:t,onChange:function(e){var t=e.target;return c(t.value)}})),r.a.createElement("div",null,r.a.createElement("label",{className:"subtitle",for:"password"},"Password"),r.a.createElement("input",{className:"formTextbox",id:"password",type:"password",value:a,onChange:function(e){var t=e.target;return o(t.value)}})),r.a.createElement("button",{className:"button",id:"login-button",type:"submit"},"Login"),r.a.createElement("button",{className:"button",id:"cancel-button",onClick:function(e){e.preventDefault(),l.push("/")}},"Cancel")))},N=function(e){var t=e.createNote,a=Object(n.useState)(""),c=Object(l.a)(a,2),o=c[0],s=c[1],u=Object(n.useState)(""),i=Object(l.a)(u,2),m=i[0],p=i[1];return r.a.createElement("div",{className:"formDiv"},r.a.createElement("h2",{className:"title"},"Add a new note"),r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),t({title:m,content:o,important:!1}),s(""),p("")}},r.a.createElement("div",null,r.a.createElement("label",{className:"subtitle",for:"username"},"Note"),r.a.createElement("textarea",{rows:"4",cols:"25",className:"formTextbox textbox-large",id:"NoteDesc",value:o,onChange:function(e){var t=e.target;return s(t.value)}})),r.a.createElement("button",{className:"button",type:"submit"},"Save")))},h={register:function(){var e=Object(m.a)(i.a.mark((function e(t){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.a.post("/api/users",t);case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},w=function(e){var t=e.setErrorMessage,a=Object(v.f)(),c=Object(n.useState)(""),o=Object(l.a)(c,2),s=o[0],u=o[1],p=Object(n.useState)(""),f=Object(l.a)(p,2),b=f[0],d=f[1],g=function(){var e=Object(m.a)(i.a.mark((function e(n){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),""!=s&&""!=b){e.next=5;break}return t("Username or Password cannot be left empty."),setTimeout((function(){t("")}),2500),e.abrupt("return");case 5:return e.prev=5,e.next=8,h.register({newUsername:s,newPassword:b});case 8:e.sent,u(""),d(""),a.push("/"),e.next=19;break;case 14:e.prev=14,e.t0=e.catch(5),console.log(e.t0),t("Error: Could not register. Try again later."),setTimeout((function(){t(null)}),2500);case 19:case"end":return e.stop()}}),e,null,[[5,14]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",null,r.a.createElement("h2",{className:"title"},"Register"),r.a.createElement("form",{onSubmit:g},r.a.createElement("div",null,r.a.createElement("label",{className:"subtitle",for:"username"},"Username"),r.a.createElement("input",{className:"formTextbox",id:"username",value:s,onChange:function(e){var t=e.target;return u(t.value)}})),r.a.createElement("div",null,r.a.createElement("label",{className:"subtitle",for:"password"},"Password"),r.a.createElement("input",{className:"formTextbox",id:"password",type:"password",value:b,onChange:function(e){var t=e.target;return d(t.value)}})),r.a.createElement("button",{className:"button",id:"login-button",type:"submit"},"Register"),r.a.createElement("button",{className:"button",id:"cancel-button",onClick:function(e){e.preventDefault(),a.push("/")}},"Cancel")))},O=r.a.forwardRef((function(e,t){var a=Object(n.useState)(!1),c=Object(l.a)(a,2),o=c[0],s=c[1],u={display:o?"none":""},i={display:o?"":"none"},m=function(){s(!o)};return Object(n.useImperativeHandle)(t,(function(){return{toggleVisibility:m}})),r.a.createElement("div",null,r.a.createElement("div",{style:u},r.a.createElement("button",{className:"button",onClick:m},e.buttonLabel)),r.a.createElement("div",{style:i,className:"toggableContent"},e.children,r.a.createElement("button",{className:"button",onClick:m},"Cancel")))}));O.displayName="Togglable";var j=function(e){var t=e.note,a=e.toggleImportance,n=t.important?"Make not important":"Make important";return r.a.createElement("li",{className:"note"},r.a.createElement("p",null,t.content),r.a.createElement("button",{className:"button button-dark",onClick:a},n))},x=function(e){var t=e.notesToShow,a=e.toggleImportance,c=e.setNotes,o=e.createNote;return Object(n.useEffect)((function(){d.getAll().then((function(e){c(e)}))}),[]),r.a.createElement("div",null,r.a.createElement(N,{createNote:o}),r.a.createElement("h2",{className:"title"},"Your notes."),r.a.createElement("ul",{className:"noteList"},t.map((function(e){return r.a.createElement(j,{key:e.id,note:e,toggleImportance:function(){return a(e.id)}})}))))},k=a(11),y=function(e){var t=e.message;return null==t?null:r.a.createElement("div",{className:"error"},t)},S=function(){var e=Object(n.useState)([]),t=Object(l.a)(e,2),a=t[0],c=t[1],o=Object(n.useState)("a new note"),u=Object(l.a)(o,2),i=(u[0],u[1]),m=Object(n.useState)(!0),p=Object(l.a)(m,2),f=p[0],b=p[1],g=Object(n.useState)(),N=Object(l.a)(g,2),h=N[0],O=N[1],j=Object(n.useState)(""),S=Object(l.a)(j,2),C=S[0],T=S[1],U=Object(n.useState)(""),I=Object(l.a)(U,2),D=I[0],P=I[1],A=Object(n.useState)(null),L=Object(l.a)(A,2),M=L[0],J=L[1],R=Object(n.useState)(!1),z=Object(l.a)(R,2);z[0],z[1],Object(n.useRef)();Object(n.useEffect)((function(){var e=window.localStorage.getItem("loggedNoteappUser");if(e){var t=JSON.parse(e);J(t),d.setToken(t.token)}}),[]),Object(n.useEffect)((function(){M&&d.getAll().then((function(e){c(e)}))}),[]);var Y=function(e){d.createNote(e).then((function(e){c(a.concat(e)),i("")}))},B=f?a:a.filter((function(e){return e.important})),H=function(e){var t=a.find((function(t){return t.id===e})),n=Object(s.a)(Object(s.a)({},t),{},{important:!t.important});d.updateNote(e,n).then((function(t){c(a.map((function(a){return a.id!==e?a:t})))})).catch((function(n){O("Note '".concat(t.content,"' was already removed from the server")),setTimeout((function(){O(null)}),5e3),c(a.filter((function(t){return t.id!==e})))}))};return r.a.createElement(k.a,null,r.a.createElement("div",{className:"app"},r.a.createElement(y,{message:h}),r.a.createElement(k.b,{to:"/"},r.a.createElement("div",{className:"navbar"},r.a.createElement("img",{className:"logo",src:"./res/pencil-svg.svg",alt:"Logo"}),r.a.createElement("h1",{className:"title"},"Jotally"))),r.a.createElement("div",{className:"optionsbar"},r.a.createElement("button",{className:"button",onClick:function(){return b(!f)}},"Show ",f?"Important":"All"),r.a.createElement("div",{className:"flex-right"},r.a.createElement(k.b,{to:"/login"},r.a.createElement("button",{className:"button"},"Login")),r.a.createElement(k.b,{to:"/register"},r.a.createElement("button",{className:"button"},"Register")))),r.a.createElement(v.c,null,r.a.createElement(v.a,{path:"/login"},r.a.createElement(E,{username:C,password:D,setUsername:T,setPassword:P,setUser:J,setErrorMessage:O})),r.a.createElement(v.a,{path:"/register"},r.a.createElement(w,{setErrorMessage:O})),r.a.createElement(v.a,{path:"/",render:function(){return M?r.a.createElement(x,{notesToShow:B,toggleImportance:H,setNotes:c,createNote:Y}):r.a.createElement("h3",{className:"subtitle"},"You aren't currently logged in. Log in to see your saved notes.")}})),r.a.createElement("div",{className:"footer"},r.a.createElement("p",{className:"title"},"Created by ",r.a.createElement("a",{className:"links",href:"https://peterdpong.github.io/"},"Peter D'Pong")),r.a.createElement("div",{className:"flex-right"},r.a.createElement("p",{className:"title"},r.a.createElement("a",{className:"links",href:"https://github.com/peterdpong/jotally"},"Source"))))))};a(58);o.a.render(r.a.createElement(S,null),document.getElementById("root"))}},[[30,1,2]]]);
//# sourceMappingURL=main.dc654cd0.chunk.js.map