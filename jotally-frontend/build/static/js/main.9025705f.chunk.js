(this.webpackJsonppart1=this.webpackJsonppart1||[]).push([[0],{30:function(e,t,a){e.exports=a(59)},58:function(e,t,a){},59:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(28),c=a.n(o),s=a(17),l=a(6),u=a(8),i=a.n(u),m=a(9),p=a(11),f=a.n(p),b=null,d={getAll:function(){var e=Object(m.a)(i.a.mark((function e(){var t,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={headers:{Authorization:b}},e.next=3,f.a.get("/api/notes",t);case 3:return a=e.sent,console.log(a.data),e.abrupt("return",a.data);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),createNote:function(){var e=Object(m.a)(i.a.mark((function e(t){var a,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={headers:{Authorization:b}},e.next=3,f.a.post("/api/notes",t,a);case 3:return n=e.sent,e.abrupt("return",n.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),updateNote:function(e,t){return f.a.put("".concat("/api/notes","/").concat(e),t).then((function(e){return e.data}))},setToken:function(e){b="bearer ".concat(e)}},g=a(1),v={login:function(){var e=Object(m.a)(i.a.mark((function e(t){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.a.post("/api/login",t);case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},E=function(e){var t=e.username,a=e.password,n=e.setUser,o=e.setUsername,c=e.setPassword,s=e.setErrorMessage,l=Object(g.f)(),u=function(){var e=Object(m.a)(i.a.mark((function e(r){var u;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.preventDefault(),e.prev=1,e.next=4,v.login({username:t,password:a});case 4:u=e.sent,window.localStorage.setItem("loggedNoteappUser",JSON.stringify(u)),d.setToken(u.token),n(u),o(""),c(""),l.push("/"),e.next=18;break;case 13:e.prev=13,e.t0=e.catch(1),console.log(e.t0),s("Wrong username or password."),setTimeout((function(){s(null)}),5e3);case 18:case"end":return e.stop()}}),e,null,[[1,13]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",null,r.a.createElement("h2",{className:"title"},"Login"),r.a.createElement("form",{onSubmit:u},r.a.createElement("div",null,r.a.createElement("label",{className:"subtitle",for:"username"},"Username"),r.a.createElement("input",{className:"formTextbox",id:"username",value:t,onChange:function(e){var t=e.target;return o(t.value)}})),r.a.createElement("div",null,r.a.createElement("label",{className:"subtitle",for:"password"},"Password"),r.a.createElement("input",{className:"formTextbox",id:"password",type:"password",value:a,onChange:function(e){var t=e.target;return c(t.value)}})),r.a.createElement("button",{className:"button",id:"login-button",type:"submit"},"Login"),r.a.createElement("button",{className:"button",id:"cancel-button",onClick:function(e){e.preventDefault(),l.push("/")}},"Cancel")))},h=r.a.forwardRef((function(e,t){var a=Object(n.useState)(!1),o=Object(l.a)(a,2),c=o[0],s=o[1],u={display:c?"none":""},i={display:c?"":"none"},m=function(){s(!c)};return Object(n.useImperativeHandle)(t,(function(){return{toggleVisibility:m}})),r.a.createElement("div",null,r.a.createElement("div",{style:u},r.a.createElement("button",{className:"button",onClick:m},e.buttonLabel)),r.a.createElement("div",{style:i,className:"toggableContent"},e.children,r.a.createElement("button",{className:"button",onClick:m},"Cancel")))}));h.displayName="Togglable";var N=function(e){var t=e.note,a=e.toggleImportance,n=t.important?"Make not important":"Make important";return r.a.createElement("li",{className:"note"},r.a.createElement("p",null,t.content),r.a.createElement("button",{className:"button button-dark",onClick:a},n))},O=function(e){var t=e.notesToShow,a=e.toggleImportance,o=e.setNotes;return Object(n.useEffect)((function(){d.getAll().then((function(e){o(e)}))}),[]),r.a.createElement("ul",{className:"noteList"},t.map((function(e){return r.a.createElement(N,{key:e.id,note:e,toggleImportance:function(){return a(e.id)}})})))},j=a(13),w=function(e){var t=e.message;return null==t?null:r.a.createElement("div",{className:"error"},t)},k=function(){var e=Object(n.useState)([]),t=Object(l.a)(e,2),a=t[0],o=t[1],c=Object(n.useState)("a new note"),u=Object(l.a)(c,2),i=(u[0],u[1],Object(n.useState)(!0)),m=Object(l.a)(i,2),p=m[0],f=m[1],b=Object(n.useState)(),v=Object(l.a)(b,2),h=v[0],N=v[1],k=Object(n.useState)(""),y=Object(l.a)(k,2),S=y[0],x=y[1],C=Object(n.useState)(""),T=Object(l.a)(C,2),I=T[0],L=T[1],U=Object(n.useState)(null),A=Object(l.a)(U,2),J=A[0],P=A[1],M=Object(n.useState)(!1),D=Object(l.a)(M,2);D[0],D[1],Object(n.useRef)();Object(n.useEffect)((function(){var e=window.localStorage.getItem("loggedNoteappUser");if(e){var t=JSON.parse(e);P(t),d.setToken(t.token)}}),[]),Object(n.useEffect)((function(){J&&d.getAll().then((function(e){o(e)}))}),[]);var z=p?a:a.filter((function(e){return e.important})),R=function(e){var t=a.find((function(t){return t.id===e})),n=Object(s.a)(Object(s.a)({},t),{},{important:!t.important});d.updateNote(e,n).then((function(t){o(a.map((function(a){return a.id!==e?a:t})))})).catch((function(n){N("Note '".concat(t.content,"' was already removed from the server")),setTimeout((function(){N(null)}),5e3),o(a.filter((function(t){return t.id!==e})))}))};return r.a.createElement(j.a,null,r.a.createElement("div",{className:"app"},r.a.createElement(w,{message:h}),r.a.createElement(j.b,{to:"/"},r.a.createElement("div",{className:"navbar"},r.a.createElement("img",{className:"logo",src:"./res/pencil-svg.svg",alt:"Logo"}),r.a.createElement("h1",{className:"title"},"Jotally"))),r.a.createElement("div",{className:"optionsbar"},r.a.createElement("button",{className:"button",onClick:function(){return f(!p)}},"Show ",p?"Important":"All"),r.a.createElement("div",{className:"flex-right"},r.a.createElement(j.b,{to:"/login"},r.a.createElement("button",{className:"button"},"Login")))),r.a.createElement(g.c,null,r.a.createElement(g.a,{path:"/login"},r.a.createElement(E,{username:S,password:I,setUsername:x,setPassword:L,setUser:P,setErrorMessage:N})),r.a.createElement(g.a,{path:"/",render:function(){return J?r.a.createElement(O,{notesToShow:z,toggleImportance:R,setNotes:o}):r.a.createElement("h3",{className:"subtitle"},"You aren't currently logged in. Log in to see your saved notes.")}})),r.a.createElement("div",{className:"footer"},r.a.createElement("p",{className:"title"},"Created by ",r.a.createElement("a",{className:"links",href:"https://peterdpong.github.io/"},"Peter D'Pong")),r.a.createElement("div",{className:"flex-right"},r.a.createElement("p",{className:"title"},r.a.createElement("a",{className:"links",href:"https://github.com/peterdpong/jotally"},"Source"))))))};a(58);c.a.render(r.a.createElement(k,null),document.getElementById("root"))}},[[30,1,2]]]);
//# sourceMappingURL=main.9025705f.chunk.js.map