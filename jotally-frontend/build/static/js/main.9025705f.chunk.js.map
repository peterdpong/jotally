{"version":3,"sources":["services/notes.js","services/login.js","components/LoginForm.js","components/Toggable.js","components/Note.js","components/NotesList.js","App.js","index.js"],"names":["token","getAll","a","config","headers","Authorization","axios","get","response","console","log","data","createNote","newObject","post","updateNote","id","put","then","setToken","newToken","login","credentials","LoginForm","username","password","setUser","setUsername","setPassword","setErrorMessage","history","useHistory","handleLogin","event","preventDefault","loginService","user","window","localStorage","setItem","JSON","stringify","noteService","push","setTimeout","className","onSubmit","for","value","onChange","target","type","onClick","Togglable","React","forwardRef","props","ref","useState","visible","setVisible","hideWhenVisible","display","showWhenVisible","toggleVisibility","useImperativeHandle","style","buttonLabel","children","displayName","Note","note","toggleImportance","label","important","content","NotesList","notesToShow","setNotes","useEffect","initialNotes","map","key","Notification","message","App","notes","showAll","setShowAll","errorMessage","useRef","loggedUserJSON","getItem","parse","filter","find","n","changedNote","returnedNote","catch","error","to","src","alt","path","render","href","ReactDOM","document","getElementById"],"mappings":"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","file":"static/js/main.9025705f.chunk.js","sourcesContent":["import axios from 'axios'\n\nconst baseUrl = \"/api/notes\"\n\nlet token = null\n\nconst setToken = newToken => {\n  token = `bearer ${newToken}`\n}\n\nconst getAll =  async () => {\n  const config = {\n    headers: { Authorization: token }\n  }\n\n  const response = await axios.get(baseUrl, config)\n  console.log(response.data)\n  return response.data\n}\n\nconst createNote = async newObject => {\n  const config = {\n    headers: { Authorization: token }\n  }\n  const response = await axios.post(baseUrl, newObject, config)\n  return response.data\n}\n\nconst updateNote = (id, newObject) => {\n  const request = axios.put(`${baseUrl}/${id}`, newObject)\n  return request.then(response => response.data)\n}\n\nexport default { getAll, createNote, updateNote, setToken}\n","import axios from 'axios'\nconst baseUrl = '/api/login'\n\nconst login = async credentials => {\n  const response = await axios.post(baseUrl, credentials)\n  return response.data\n}\n\nexport default { login }","import React from 'react'\nimport PropTypes from 'prop-types'\nimport { useHistory } from 'react-router-dom'\nimport noteService from '../services/notes'\nimport loginService from '../services/login'\n\n\n\n\nconst LoginForm = ({\n  username,\n  password,\n  setUser,\n  setUsername,\n  setPassword,\n  setErrorMessage\n  \n}) => {\n\n  const history = useHistory()\n\n  const onCancel = (event) => {\n    event.preventDefault()\n    history.push('/')\n  }\n\n  const handleLogin = async (event) => {\n    event.preventDefault()\n    try {\n      const user = await loginService.login({\n        username, password\n      })\n  \n      window.localStorage.setItem(\n        'loggedNoteappUser', JSON.stringify(user)\n      )\n  \n      noteService.setToken(user.token)\n      setUser(user)\n      setUsername('')\n      setPassword('')\n      history.push('/')\n    } catch (exception) {\n      console.log(exception)\n      setErrorMessage('Wrong username or password.')\n      setTimeout(() => {\n        setErrorMessage(null)\n      }, 5000)\n    } \n  }\n\n\n  return (\n    <div>\n      <h2 className=\"title\">Login</h2>\n\n      <form onSubmit={handleLogin}>\n        <div>\n          <label className=\"subtitle\" for=\"username\">Username</label>\n          <input\n            className=\"formTextbox\"\n            id=\"username\"\n            value={username}\n            onChange={({ target }) => setUsername(target.value)}\n          />\n        </div>\n\n        <div>\n        <label className=\"subtitle\" for=\"password\">Password</label>\n          <input\n            className=\"formTextbox\"\n            id=\"password\"\n            type=\"password\"\n            value={password}\n            onChange={({ target }) => setPassword(target.value)}\n          />\n        </div>\n        <button className=\"button\" id='login-button' type=\"submit\">Login</button>\n        <button className=\"button\" id='cancel-button' onClick={onCancel}>Cancel</button>\n      </form>\n\n      \n    </div>\n  )\n}\n\nLoginForm.propTypes = {\n  username: PropTypes.string.isRequired,\n  password: PropTypes.string.isRequired,\n  setUser: PropTypes.func.isRequired,\n  setUsername: PropTypes.func.isRequired,\n  setPassword: PropTypes.func.isRequired,\n  setErrorMessage: PropTypes.func.isRequired,\n}\n\nexport default LoginForm","import React, {useState, useImperativeHandle} from 'react'\nimport PropTypes from 'prop-types'\n\nconst Togglable = React.forwardRef((props, ref) => {\n  const [visible, setVisible] = useState(false)\n\n  const hideWhenVisible = { display: visible ? 'none' : '' }\n  const showWhenVisible = { display: visible ? '' : 'none' }\n\n  const toggleVisibility = () => {\n    setVisible(!visible)\n  }\n\n  useImperativeHandle(ref, () => {\n    return {\n      toggleVisibility\n    }\n  })\n\n  return(\n    <div>\n      <div style={hideWhenVisible}>\n        <button className=\"button\" onClick={toggleVisibility}>{props.buttonLabel}</button>\n      </div>\n      <div style={showWhenVisible} className=\"toggableContent\">\n        {props.children}\n        <button className=\"button\" onClick={toggleVisibility}>Cancel</button>\n      </div>\n    </div>\n  )\n}) \n\nTogglable.displayName = 'Togglable'\nTogglable.propTypes = {\n  buttonLabel: PropTypes.string.isRequired\n}\n  \n\nexport default Togglable","import React from 'react'\n\nconst Note = ({note, toggleImportance}) => {\n  const label = note.important ? \"Make not important\" : \"Make important\"\n\n  return (\n    <li className='note'>\n      <p>{note.content}</p>\n      <button className=\"button button-dark\" onClick={toggleImportance}>{label}</button>\n    </li>\n  )\n}\n\nexport default Note","import React, { useEffect } from 'react'\nimport Note from './Note'\nimport noteService from '../services/notes'\n\nconst NotesList = ({ notesToShow, toggleImportance, setNotes}) => {\n\n  useEffect(() => {\n    noteService.getAll().then(initialNotes => {\n      setNotes(initialNotes)\n    })\n  }, [])\n\n  return(\n    <ul className=\"noteList\">\n        {notesToShow.map(note => \n          <Note \n          key={note.id} \n          note={note}\n          toggleImportance={() => toggleImportance(note.id)}\n          />)}\n    </ul>\n  )\n\n}\n\nexport default NotesList","import React, { useState, useEffect, useRef } from 'react'\nimport noteService from './services/notes'\nimport LoginForm from './components/LoginForm'\nimport NoteForm from './components/NoteForm'\nimport Toggable from './components/Toggable'\n\nimport NotesList from './components/NotesList'\n\nimport { BrowserRouter as Router, Switch, Route, Link} from 'react-router-dom'\n\nconst Notification = ( {message} ) => {\n  if(message == null){\n    return null\n  }\n\n  return(\n    <div className=\"error\">\n      {message}\n    </div>\n  )\n}\n\nconst App = () => {\n  const [notes, setNotes] = useState([])\n  const [newNote, setNewNote] = useState('a new note')\n  const [showAll, setShowAll] = useState(true)\n  const [errorMessage, setErrorMessage] = useState()\n  const [username, setUsername] = useState('')\n  const [password, setPassword] = useState('')\n  const [user, setUser] = useState(null)\n  const [loginVisible, setLoginVisible] = useState(false)\n  const noteFormRef = useRef()\n\n  useEffect(() => {\n    const loggedUserJSON = window.localStorage.getItem('loggedNoteappUser')\n    if (loggedUserJSON) {\n      const user = JSON.parse(loggedUserJSON)\n      setUser(user)\n      noteService.setToken(user.token)\n    }\n  }, [])\n\n  useEffect(() => {\n    if(user){\n      noteService.getAll().then(initialNotes => {\n        setNotes(initialNotes)\n      })\n    }\n  }, [])\n\n  const addNote = (noteObject) => {\n    noteFormRef.current.toggleVisibility()\n    noteService.createNote(noteObject).then(returnedNote => {\n      setNotes(notes.concat(returnedNote))\n      setNewNote(\"\")})\n  }\n\n  const notesToShow = showAll ? notes : notes.filter(note => note.important)\n\n  const toggleImportance = (id) => {\n    const note = notes.find(n => n.id === id)\n    const changedNote = {...note, important: !note.important}\n\n    noteService.updateNote(id, changedNote).then(returnedNote => {\n      setNotes(notes.map(note => note.id !== id ? note : returnedNote))\n    })\n    .catch(error => {\n      setErrorMessage(\n        `Note '${note.content}' was already removed from the server`\n      )\n      setTimeout(() => {\n        setErrorMessage(null)\n      }, 5000)\n      setNotes(notes.filter(n => n.id !== id))\n    })\n  }\n\n\n  const noteForm = () => (\n    <Toggable buttonLabel='New Note' ref={noteFormRef}>\n      <NoteForm\n        createNote={addNote}/>\n    </Toggable>\n  )\n\n  return (\n    <Router>\n      <div className=\"app\">\n        <Notification message={errorMessage}/>\n\n        <Link to=\"/\">\n          <div className=\"navbar\">\n              <img className=\"logo\" src=\"./res/pencil-svg.svg\" alt=\"Logo\"/>\n              <h1 className=\"title\">Jotally</h1>\n          </div>\n        </Link>\n        \n\n        <div className=\"optionsbar\">\n          <button className=\"button\" onClick={() => setShowAll(!showAll)}>\n            Show {showAll ? 'Important' : 'All'}\n          </button>\n          <div className=\"flex-right\">\n            <Link to=\"/login\">\n              <button className=\"button\">Login</button>\n            </Link>\n          </div>\n        </div>\n        \n\n        <Switch>\n          <Route path=\"/login\">\n            <LoginForm\n            username={username}\n            password={password}\n            setUsername={setUsername}\n            setPassword={setPassword}\n            setUser={setUser}\n            setErrorMessage={setErrorMessage}\n            />\n          </Route>\n\n          <Route path=\"/\" render={() => \n            user ? <NotesList notesToShow={notesToShow} toggleImportance={toggleImportance} setNotes={setNotes}/> \n            : <h3 className=\"subtitle\">You aren't currently logged in. Log in to see your saved notes.</h3>}>\n            \n          </Route>\n        </Switch>\n\n        \n        <div className=\"footer\">\n          <p className=\"title\">Created by <a className=\"links\" href=\"https://peterdpong.github.io/\">Peter D'Pong</a></p>\n          \n          <div className=\"flex-right\">\n            <p className=\"title\"><a className=\"links\" href=\"https://github.com/peterdpong/jotally\">Source</a></p>\n          </div>\n        </div>\n      </div>\n    </Router>\n  )\n}\n\nexport default App","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport App from './App'\n\nimport './index.css'\n\nReactDOM.render(\n  <App/>,\n  document.getElementById('root')\n)"],"sourceRoot":""}